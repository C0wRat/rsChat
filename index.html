<!DOCTYPE html>
<html>
<head>
<style>

body {background-color: #92A8D1;}
div {text-align: center;}
.messagebox{height: 30px;}
textarea {resize: none;}

</style>

<script>
  const xhr = new XMLHttpRequest(); 

  xhr.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      chatbox =  document.getElementById("chat")
      if (chatbox.value != this.responseText){
        chatbox.value = this.responseText;
        chatbox.scrollTop = chatbox.scrollHeight;
      }
    }
  };

  setInterval(()=>{ 
      xhr.open("GET","recv.txt",true); 
      xhr.send(); 
  },200) 

  document.addEventListener('keydown', function(event) {
    if(event.keyCode == 13) {
        message = ""
        message = document.getElementById("message").value
        document.getElementById("message").value = ""
        if (message != ""){
          // alert(message);
          xhr.open("POST", "message", true);
          xhr.setRequestHeader("message", message);
          xhr.send();
        }
      }
  });

</script>

</head>
<body>
 
<div>
<h1>RSchat</h1>

<textarea id="chat" name="chat" rows="25" cols="150">

</textarea><br><br>

<!-- <form enctype="text/plain"> -->
<input type="text" class="messagebox" id="message" name="message" size="151" enctype="text/plain"><br><br>
<!-- </form> -->
</div>
</body>
</html>
